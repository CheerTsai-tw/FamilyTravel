<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ±åŒ—ä¸ƒæ—¥éŠ (Tohoku Trip)</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* --- åŸºç¤è¨­å®š & æ—¥å¼æ¥µç°¡é…è‰² --- */
        :root {
            --bg-color: #F7F7F7;
            --card-bg: #FFFFFF;
            --text-main: #333333;
            --text-sub: #666666;
            --accent-color: #4A6C74; /* é’éˆè‰² */
            --highlight-food: #D98E73; /* ç…‰ç“¦è‰² */
            --highlight-shop: #8EACBB;
            --tag-transport: #E0E0E0;
            --flight-color: #2C3E50;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0; padding: 0; padding-bottom: 90px;
        }

        /* --- é ‚éƒ¨æ—¥æœŸå°èˆª --- */
        .day-scroller {
            background: rgba(255,255,255,0.98);
            padding: 12px 10px;
            overflow-x: auto;
            white-space: nowrap;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        .day-chip {
            display: inline-block;
            padding: 6px 14px;
            margin-right: 6px;
            border-radius: 20px;
            background: #F0F0F0;
            color: #999;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.3s;
            cursor: pointer;
        }
        .day-chip.active {
            background: var(--accent-color);
            color: #FFF;
            box-shadow: 0 2px 6px rgba(74, 108, 116, 0.4);
        }

        /* --- å…§å®¹å®¹å™¨ --- */
        .container { padding: 16px; max-width: 600px; margin: 0 auto; }

        /* --- å¤©æ°£ Widget --- */
        .weather-widget {
            background: linear-gradient(120deg, #a1c4fd 0%, #c2e9fb 100%);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #445;
            box-shadow: 0 2px 8px rgba(161, 196, 253, 0.3);
        }

        /* --- å¡ç‰‡æ¨£å¼ --- */
        .card {
            background: var(--card-bg);
            border-radius: 14px;
            padding: 18px;
            margin-bottom: 14px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.03);
            border-left: 4px solid transparent;
            position: relative;
        }
        .card.sightseeing { border-left-color: var(--accent-color); }
        .card.food { border-left-color: var(--highlight-food); }
        .card.transport { border-left-color: var(--tag-transport); background: #FCFCFC; }
        .card.hotel { border-left-color: #9B59B6; }
        .card.flight { border-left-color: var(--flight-color); border: 1px solid #E8E8E8; }

        .card-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px; }
        .card-time { font-size: 18px; font-weight: 700; color: var(--accent-color); font-family: 'Helvetica Neue', sans-serif; }
        .card-title { font-size: 17px; font-weight: 700; margin: 4px 0 8px 0; line-height: 1.4; }
        .card-meta { font-size: 13px; color: var(--text-sub); line-height: 1.6; }
        
        /* --- æ¨™ç±¤èˆ‡æŒ‰éˆ• --- */
        .tag { padding: 2px 6px; border-radius: 4px; font-size: 12px; font-weight: bold; color: white; display: inline-block; margin: 0 2px; }
        .tag.eat { background-color: var(--highlight-food); }
        .tag.buy { background-color: var(--highlight-shop); }
        .tag.alert { background-color: #E74C3C; }
        .tag.code { background-color: #2C3E50; color: #FFF; font-family: monospace; letter-spacing: 1px; padding: 2px 8px; }

        .nav-btn {
            display: inline-flex;
            align-items: center;
            background: #F0F4F5;
            color: var(--accent-color);
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 13px;
            text-decoration: none;
            font-weight: 600;
            margin-top: 12px;
            transition: background 0.2s;
        }
        .nav-btn:active { background: #E0E4E5; }
        .nav-btn i { margin-right: 6px; }

        /* --- åº•éƒ¨å°èˆª --- */
        .bottom-nav {
            position: fixed;
            bottom: 0; left: 0; right: 0;
            background: #FFF;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            border-top: 1px solid #EEE;
            z-index: 200;
            padding-bottom: env(safe-area-inset-bottom);
        }
        .nav-item { text-align: center; color: #BBB; font-size: 10px; cursor: pointer; padding: 5px; width: 100%; }
        .nav-item.active { color: var(--accent-color); }
        .nav-item i { font-size: 20px; display: block; margin-bottom: 4px; }

        /* --- å·¥å…·é é¢ --- */
        .tools-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .tool-card { 
            background: #FFF; padding: 20px; border-radius: 12px; text-align: center; 
            box-shadow: 0 2px 8px rgba(0,0,0,0.04); cursor: pointer;
        }
        .tool-card:active { transform: scale(0.98); }
        
        /* éš±è—/é¡¯ç¤ºæ§åˆ¶ */
        .view-section { display: none; animation: fadeIn 0.3s; }
        .view-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        /* å½ˆçª—æ¨£å¼ */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.5); z-index: 999;
            display: none; align-items: center; justify-content: center;
        }
        .modal {
            background: white; width: 85%; max-width: 400px;
            border-radius: 16px; padding: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>

    <div id="day-nav" class="day-scroller"></div>

    <div class="container">
        
        <div id="view-itinerary" class="view-section active">
            <div class="weather-widget">
                <div>
                    <strong id="weather-loc" style="font-size:18px;">æ­£åœ¨è¼‰å…¥...</strong>
                    <div id="weather-desc" style="font-size:13px; opacity:0.8;">é å ±åŠŸèƒ½æº–å‚™ä¸­</div>
                </div>
                <i class="fas fa-cloud-sun" style="font-size:24px; opacity:0.6;"></i>
            </div>
            <div id="cards-container"></div>
        </div>

        <div id="view-tools" class="view-section">
            <h2 style="font-size:20px; margin: 10px 0 20px 0; color:var(--text-main);">æ—…ç¨‹ç™¾å¯¶ç®±</h2>
            <div class="tools-grid">
                <div class="tool-card" onclick="showFlightInfo()">
                    <i class="fas fa-plane" style="color:#2C3E50; font-size:28px; margin-bottom:10px;"></i>
                    <h3>èˆªç­è³‡è¨Š</h3>
                    <p style="font-size:12px; color:#999;">JX862 / JX863</p>
                </div>
                <div class="tool-card">
                    <i class="fas fa-bed" style="color:#9B59B6; font-size:28px; margin-bottom:10px;"></i>
                    <h3>ä½å®¿ç¸½è¦½</h3>
                    <p style="font-size:12px; color:#999;">é£¯åº—èˆ‡è¨‚å–®</p>
                </div>
                <div class="tool-card">
                    <i class="fas fa-wallet" style="color:#F39C12; font-size:28px; margin-bottom:10px;"></i>
                    <h3>å…¬è²»è¨˜å¸³</h3>
                    <p style="font-size:12px; color:#999;">å‰©é¤˜é ç®—</p>
                </div>
                <div class="tool-card" style="border: 1px solid #FFCDD2;">
                    <i class="fas fa-phone-alt" style="color:#E74C3C; font-size:28px; margin-bottom:10px;"></i>
                    <h3>ç·Šæ€¥è¯çµ¡</h3>
                    <p style="font-size:12px; color:#999;">ä¿éšª/å ±æ¡ˆ</p>
                </div>
            </div>
        </div>
    </div>

    <div class="bottom-nav">
        <div class="nav-item active" onclick="switchView('itinerary')">
            <i class="fas fa-map-marked-alt"></i>
            <div>è¡Œç¨‹</div>
        </div>
        <div class="nav-item" onclick="switchView('tools')">
            <i class="fas fa-suitcase"></i>
            <div>å·¥å…·</div>
        </div>
    </div>

    <div id="modal-flight" class="modal-overlay" onclick="this.style.display='none'">
        <div class="modal" onclick="event.stopPropagation()">
            <h3 style="margin-top:0; border-bottom:1px solid #eee; padding-bottom:10px;">âœˆï¸ èˆªç­è³‡è¨Š</h3>
            <div style="margin-bottom:15px;">
                <div style="font-weight:bold; color:var(--accent-color);">å»ç¨‹ | 12/06 (å…­)</div>
                <div style="font-size:14px; margin-top:5px;">
                    <strong>JX862 æ˜Ÿå®‡èˆªç©º</strong><br>
                    11:50 TPE æ¡ƒåœ’ T1<br>
                    â¬‡ (3h 10m)<br>
                    16:00 SDJ ä»™å°
                </div>
            </div>
            <div>
                <div style="font-weight:bold; color:var(--accent-color);">å›ç¨‹ | 12/12 (äº”)</div>
                <div style="font-size:14px; margin-top:5px;">
                    <strong>JX863 æ˜Ÿå®‡èˆªç©º</strong><br>
                    17:15 SDJ ä»™å°<br>
                    â¬‡ (4h 20m)<br>
                    20:35 TPE æ¡ƒåœ’ T1
                </div>
            </div>
            <button onclick="document.getElementById('modal-flight').style.display='none'" style="width:100%; margin-top:20px; padding:10px; background:#f0f0f0; border:none; border-radius:8px;">é—œé–‰</button>
        </div>
    </div>

    <script>
        // --- æ ¸å¿ƒè³‡æ–™å€ (æ‚¨é¤µçµ¦æˆ‘çš„è³‡æ–™éƒ½åœ¨é€™) ---
        const itineraryData = {
            "day1": { 
                date: "12/06 (å…­)", 
                loc: "ä»™å°å¸‚", 
                temp: "3Â°C - 8Â°C",
                events: [
                    { 
                        time: "09:30", 
                        title: "æŠµé”æ¡ƒåœ’æ©Ÿå ´ T1", 
                        type: "transport", 
                        note: "å»ºè­°ææ—© 2.5 å°æ™‚æŠµé”æ«ƒæª¯å ±åˆ°ã€‚<br>å‚™è¨»ï¼šæ˜Ÿå®‡èˆªç©ºä½æ–¼ç¬¬ä¸€èˆªå»ˆã€‚", 
                        nav: "æ¡ƒåœ’æ©Ÿå ´ç¬¬ä¸€èˆªå»ˆ" 
                    },
                    { 
                        time: "11:50", 
                        title: "JX862 èµ·é£› ğŸ›«", 
                        type: "flight", 
                        note: "æ©Ÿå‹ï¼šA330-900NEO<br>é£›è¡Œæ™‚é–“ï¼š3å°æ™‚10åˆ†<br>ç›®çš„åœ°ï¼šä»™å° (SDJ)", 
                        nav: "" 
                    },
                    { 
                        time: "16:00", 
                        title: "æŠµé”ä»™å°æ©Ÿå ´", 
                        type: "transport", 
                        note: "å…¥å¢ƒå¯©æŸ¥ç´„éœ€ 40-60 åˆ†é˜ã€‚<br>é ˜å®Œè¡Œæè«‹å‰å¾€ 2F é€£æ¥é€šé“æ­ä¹˜é›»è»Šã€‚", 
                        nav: "ä»™å°ç©ºæ¸¯é§…" 
                    },
                    { 
                        time: "17:08", 
                        title: "æ­ä¹˜ä»™å°ç©ºæ¸¯ç·š", 
                        type: "transport", 
                        note: "<b>æœ€ä½³ç­æ¬¡ï¼š17:08 ç™¼ â†’ 17:33 è‘—</b><br>(å‚™ç”¨ç­æ¬¡ï¼š17:39 ç™¼ â†’ 18:04 è‘—)<br>å‰å¾€ï¼šJR ä»™å°ç«™", 
                        nav: "" 
                    },
                    { 
                        time: "18:00", 
                        title: "é£¯åº— Check-in", 
                        type: "hotel", 
                        note: "<b>Hotel Livemax Sendai Hirose-dori</b><br>é ç´„ä»£è™Ÿï¼š<span class='tag code'>1628181511</span><br>é›»è©±ï¼š022-263-6400<br>å¾ä»™å°ç«™æ­¥è¡Œç´„ 15 åˆ†æˆ–æ­è¨ˆç¨‹è»Šã€‚", 
                        nav: "ãƒ›ãƒ†ãƒ«ãƒªãƒ–ãƒãƒƒã‚¯ã‚¹ä»™å°åºƒç€¬é€š" 
                    },
                    { 
                        time: "19:00", 
                        title: "æ™šé¤æ¨è–¦ï¼šä»™å°ç‰›èˆŒ", 
                        type: "food", 
                        note: "é£¯åº—é™„è¿‘ååº—æ¨è–¦ï¼š<br>1. <span class='tag eat'>å‘³å¤ªåŠ© æœ¬åº—</span> (ç™¼æºåº—)<br>2. <span class='tag eat'>ç‰›èˆŒæ–™ç† é–£</span> (è©•åƒ¹é«˜)<br>è¨˜å¾—é»åšåˆ‡ç‰›èˆŒå®šé£Ÿï¼", 
                        nav: "å‘³å¤ªåŠ© æœ¬åº—" 
                    }
                ]
            },
            "day2": { date: "12/07 (æ—¥)", loc: "æ¾å³¶ç£", temp: "2Â°C - 7Â°C", events: [] },
            "day3": { date: "12/08 (ä¸€)", loc: "éŠ€å±±æº«æ³‰", temp: "-1Â°C - 4Â°C", events: [] },
            "day4": { date: "12/09 (äºŒ)", loc: "è—ç‹æº«æ³‰", temp: "-3Â°C - 2Â°C", events: [] },
            "day5": { date: "12/10 (ä¸‰)", loc: "ç±³æ¾¤", temp: "0Â°C - 5Â°C", events: [] },
            "day6": { date: "12/11 (å››)", loc: "ç‹ç‹¸æ‘/ä»™å°", temp: "2Â°C - 7Â°C", events: [] },
            "day7": { 
                date: "12/12 (äº”)", 
                loc: "å›ç¨‹", 
                temp: "4Â°C - 9Â°C", 
                events: [
                    { 
                        time: "15:15", 
                        title: "æŠµé”ä»™å°æ©Ÿå ´", 
                        type: "transport", 
                        note: "å»ºè­°ææ—© 2 å°æ™‚æŠµé”è¾¦ç†ç™»æ©Ÿã€‚<br>æœ€å¾Œæ¡è²·ä¼´æ‰‹ç¦® (æ¯›è±†å¥¶æ˜”ã€è©ä¹‹æœˆ)ã€‚", 
                        nav: "ä»™å°ç©ºæ¸¯" 
                    },
                    { 
                        time: "17:15", 
                        title: "JX863 èµ·é£› ğŸ›«", 
                        type: "flight", 
                        note: "æ©Ÿå‹ï¼šA330-900NEO<br>é£›è¡Œæ™‚é–“ï¼š4å°æ™‚20åˆ†<br>ç›®çš„åœ°ï¼šTPE (20:35 æŠµé”)", 
                        nav: "" 
                    }
                ] 
            }
        };

        // --- ç¨‹å¼é‚è¼¯å€ ---
        let currentDay = "day1";

        function init() {
            renderDayNav();
            renderCards(currentDay);
        }

        function renderDayNav() {
            const nav = document.getElementById('day-nav');
            nav.innerHTML = '';
            Object.keys(itineraryData).forEach((key, index) => {
                const day = itineraryData[key];
                const chip = document.createElement('span');
                chip.className = `day-chip ${key === currentDay ? 'active' : ''}`;
                chip.innerHTML = `Day ${index+1} <small>${day.date.split(' ')[0]}</small>`;
                chip.onclick = () => {
                    currentDay = key;
                    updateActiveDay();
                    renderCards(key);
                };
                nav.appendChild(chip);
            });
        }

        function updateActiveDay() {
            document.querySelectorAll('.day-chip').forEach(el => {
                el.classList.remove('active');
                if(el.textContent.includes(itineraryData[currentDay].date.split(' ')[0])) el.classList.add('active');
            });
        }

        function renderCards(dayKey) {
            const container = document.getElementById('cards-container');
            const dayInfo = itineraryData[dayKey];
            
            // æ›´æ–°å¤©æ°£ header
            document.getElementById('weather-loc').innerText = dayInfo.loc;
            document.getElementById('weather-desc').innerText = `æ°£æº«é æ¸¬: ${dayInfo.temp}`;

            container.innerHTML = '';

            if(!dayInfo.events || dayInfo.events.length === 0) {
                container.innerHTML = '<div style="text-align:center; padding:40px; color:#AAA;"><i class="fas fa-edit"></i><br><br>è¡Œç¨‹æ•´ç†ä¸­...</div>';
                return;
            }

            dayInfo.events.forEach(event => {
                const card = document.createElement('div');
                card.className = `card ${event.type}`;
                
                let navButtonHtml = '';
                if (event.nav) {
                    const mapLink = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(event.nav)}`;
                    navButtonHtml = `
                        <a href="${mapLink}" target="_blank" class="nav-btn">
                            <i class="fas fa-location-arrow"></i> å°èˆªï¼š${event.nav}
                        </a>`;
                }
                
                card.innerHTML = `
                    <div class="card-header">
                        <div class="card-time">${event.time}</div>
                        ${event.type === 'flight' ? '<i class="fas fa-plane" style="color:#2C3E50"></i>' : ''}
                        ${event.type === 'hotel' ? '<i class="fas fa-bed" style="color:#9B59B6"></i>' : ''}
                    </div>
                    <div class="card-title">${event.title}</div>
                    <div class="card-meta">${event.note}</div>
                    ${navButtonHtml}
                `;
                container.appendChild(card);
            });
        }

        function switchView(viewName) {
            document.querySelectorAll('.view-section').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            
            document.getElementById(`view-${viewName}`).classList.add('active');
            
            if(viewName === 'itinerary') {
                document.querySelector('.bottom-nav .nav-item:nth-child(1)').classList.add('active');
                document.getElementById('day-nav').style.display = 'block';
            } else {
                document.querySelector('.bottom-nav .nav-item:nth-child(2)').classList.add('active');
                document.getElementById('day-nav').style.display = 'none';
            }
        }

        function showFlightInfo() {
            document.getElementById('modal-flight').style.display = 'flex';
        }

        init();
    </script>
</body>
</html>